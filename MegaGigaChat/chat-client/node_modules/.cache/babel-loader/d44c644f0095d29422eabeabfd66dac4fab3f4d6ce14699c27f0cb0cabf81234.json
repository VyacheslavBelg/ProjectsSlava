{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useChat.ts\nimport { useState, useEffect, useRef } from 'react';\nimport { HubConnectionBuilder, LogLevel } from '@microsoft/signalr';\nconst CHAT_HUB_URL = \"http://localhost:5157/chatHub\";\nexport const useChat = () => {\n  _s();\n  // State\n  const [connection, setConnection] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [username, setUsername] = useState('');\n  const [roomId, setRoomId] = useState('');\n  const [isInRoom, setIsInRoom] = useState(false);\n  const [inputText, setInputText] = useState('');\n\n  // Lobby State\n  const [roomNameForCreation, setRoomNameForCreation] = useState('');\n  const [myRooms, setMyRooms] = useState([]);\n  const [showRooms, setShowRooms] = useState(false);\n\n  // Ref for chat auto-scroll\n  const messagesEndRef = useRef(null);\n\n  // 1. Connection Initialization\n  useEffect(() => {\n    const newConnection = new HubConnectionBuilder().withUrl(CHAT_HUB_URL).withAutomaticReconnect().configureLogging(LogLevel.Information).build();\n    setConnection(newConnection);\n  }, []);\n\n  // 2. Event Handlers and Start Connection\n  useEffect(() => {\n    if (connection) {\n      connection.start().then(() => {\n        console.log('Connected to SignalR Hub');\n        connection.on(\"ReceiveMessage\", message => {\n          setMessages(prev => [...prev, message]);\n        });\n        connection.on(\"ReceiveRoomHistory\", history => {\n          setMessages(history);\n        });\n        connection.on(\"ReceiveError\", error => {\n          alert(`Ошибка: ${error.text}`);\n          setIsInRoom(false);\n        });\n      }).catch(e => console.log('Connection failed: ', e));\n    }\n  }, [connection]);\n\n  // Auto-scroll\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // --- Action Functions (Client -> Server) ---\n\n  const createRoom = async () => {\n    if (!username) return alert(\"Введите имя пользователя!\");\n    try {\n      const request = {\n        username,\n        roomName: roomNameForCreation\n      };\n      const newRoomId = await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"CreateRoom\", request));\n      if (newRoomId) {\n        setRoomId(newRoomId);\n        setIsInRoom(true);\n        setShowRooms(false);\n        setMessages([]);\n      }\n    } catch (e) {\n      console.error(\"Error creating room:\", e);\n    }\n  };\n  const joinRoom = async () => {\n    if (!username || !roomId) return alert(\"Введите имя пользователя и ID комнаты!\");\n    await executeJoin(roomId);\n  };\n  const executeJoin = async id => {\n    setRoomId(id);\n    try {\n      const request = {\n        username,\n        roomId: id\n      };\n      const success = await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"JoinRoom\", request));\n      if (success) {\n        setIsInRoom(true);\n        setShowRooms(false);\n      }\n    } catch (e) {\n      console.error(\"Error joining room:\", e);\n      alert(`Не удалось войти в комнату ${id}. Возможно, ее не существует.`);\n    }\n  };\n  const sendMessage = async () => {\n    if (!inputText) return;\n    try {\n      const message = {\n        user: username,\n        text: inputText,\n        type: 'text',\n        timestamp: ''\n      };\n      await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"SendMessageToRoom\", message));\n      setInputText('');\n    } catch (e) {\n      console.error(\"Error sending message:\", e);\n    }\n  };\n  const leaveRoom = async () => {\n    try {\n      await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"LeaveRoom\"));\n      setIsInRoom(false);\n      setMessages([]);\n      setRoomId('');\n      setRoomNameForCreation('');\n    } catch (e) {\n      console.error(\"Error leaving room:\", e);\n    }\n  };\n  const deleteRoom = async () => {\n    if (!window.confirm(\"Вы уверены? Только создатель может удалить комнату.\")) return;\n    try {\n      await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"DeleteRoom\", roomId, username));\n      setIsInRoom(false);\n      setMessages([]);\n      setRoomId('');\n      setRoomNameForCreation('');\n    } catch (e) {\n      console.error(\"Error deleting room:\", e);\n      alert(\"Не удалось удалить комнату. Вы ее создатель?\");\n    }\n  };\n  const loadUserRooms = async () => {\n    if (!username) return alert(\"Введите имя пользователя!\");\n    if (showRooms) {\n      setShowRooms(false);\n      return;\n    }\n    try {\n      const roomIds = await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"GetUserRoomIds\", username));\n      if (roomIds && roomIds.length > 0) {\n        const roomsData = await Promise.all(roomIds.map(id => connection === null || connection === void 0 ? void 0 : connection.invoke(\"GetRoomInfo\", id)));\n        setMyRooms(roomsData.filter(r => r !== null));\n        setShowRooms(true);\n      } else {\n        alert(\"Активные комнаты для этого пользователя не найдены.\");\n        setMyRooms([]);\n        setShowRooms(false);\n      }\n    } catch (e) {\n      console.error(\"Error loading rooms:\", e);\n      alert(\"Не удалось загрузить комнаты. Проверьте консоль.\");\n    }\n  };\n  return {\n    // State\n    username,\n    setUsername,\n    roomId,\n    setRoomId,\n    isInRoom,\n    setIsInRoom,\n    messages,\n    inputText,\n    setInputText,\n    messagesEndRef,\n    connection,\n    // Lobby State\n    roomNameForCreation,\n    setRoomNameForCreation,\n    myRooms,\n    showRooms,\n    // Methods\n    createRoom,\n    joinRoom,\n    executeJoin,\n    sendMessage,\n    leaveRoom,\n    deleteRoom,\n    loadUserRooms\n  };\n};\n_s(useChat, \"9m+tQR+2M5eZ29JTKJCldeGsnK4=\");","map":{"version":3,"names":["useState","useEffect","useRef","HubConnectionBuilder","LogLevel","CHAT_HUB_URL","useChat","_s","connection","setConnection","messages","setMessages","username","setUsername","roomId","setRoomId","isInRoom","setIsInRoom","inputText","setInputText","roomNameForCreation","setRoomNameForCreation","myRooms","setMyRooms","showRooms","setShowRooms","messagesEndRef","newConnection","withUrl","withAutomaticReconnect","configureLogging","Information","build","start","then","console","log","on","message","prev","history","error","alert","text","catch","e","_messagesEndRef$curre","current","scrollIntoView","behavior","createRoom","request","roomName","newRoomId","invoke","joinRoom","executeJoin","id","success","sendMessage","user","type","timestamp","leaveRoom","deleteRoom","window","confirm","loadUserRooms","roomIds","length","roomsData","Promise","all","map","filter","r"],"sources":["C:/Users/slava/Desktop/Универ/3 курс/RIP/MegaGigaChat/ChatApp2.0/chat-client/src/hooks/useChat.ts"],"sourcesContent":["// src/hooks/useChat.ts\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { HubConnection, HubConnectionBuilder, LogLevel } from '@microsoft/signalr';\r\nimport { ChatMessageDto, CreateRoomRequest, JoinRoomRequest, RoomInfoDto } from '../types';\r\n\r\nconst CHAT_HUB_URL = \"http://localhost:5157/chatHub\"; \r\n\r\nexport const useChat = () => {\r\n    // State\r\n    const [connection, setConnection] = useState<HubConnection | null>(null);\r\n    const [messages, setMessages] = useState<ChatMessageDto[]>([]);\r\n    const [username, setUsername] = useState('');\r\n    const [roomId, setRoomId] = useState('');\r\n    const [isInRoom, setIsInRoom] = useState(false);\r\n    const [inputText, setInputText] = useState('');\r\n    \r\n    // Lobby State\r\n    const [roomNameForCreation, setRoomNameForCreation] = useState('');\r\n    const [myRooms, setMyRooms] = useState<RoomInfoDto[]>([]); \r\n    const [showRooms, setShowRooms] = useState(false);\r\n\r\n    // Ref for chat auto-scroll\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    // 1. Connection Initialization\r\n    useEffect(() => {\r\n        const newConnection = new HubConnectionBuilder()\r\n            .withUrl(CHAT_HUB_URL) \r\n            .withAutomaticReconnect()\r\n            .configureLogging(LogLevel.Information)\r\n            .build();\r\n\r\n        setConnection(newConnection);\r\n    }, []);\r\n\r\n    // 2. Event Handlers and Start Connection\r\n    useEffect(() => {\r\n        if (connection) {\r\n            connection.start()\r\n                .then(() => {\r\n                    console.log('Connected to SignalR Hub');\r\n                    \r\n                    connection.on(\"ReceiveMessage\", (message: ChatMessageDto) => {\r\n                        setMessages(prev => [...prev, message]);\r\n                    });\r\n\r\n                    connection.on(\"ReceiveRoomHistory\", (history: ChatMessageDto[]) => {\r\n                        setMessages(history);\r\n                    });\r\n\r\n                    connection.on(\"ReceiveError\", (error: ChatMessageDto) => {\r\n                        alert(`Ошибка: ${error.text}`);\r\n                        setIsInRoom(false); \r\n                    });\r\n                })\r\n                .catch(e => console.log('Connection failed: ', e));\r\n        }\r\n    }, [connection]);\r\n\r\n    // Auto-scroll\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [messages]);\r\n\r\n    // --- Action Functions (Client -> Server) ---\r\n\r\n    const createRoom = async () => {\r\n        if (!username) return alert(\"Введите имя пользователя!\");\r\n        try {\r\n            const request: CreateRoomRequest = { username, roomName: roomNameForCreation };\r\n            const newRoomId = await connection?.invoke<string>(\"CreateRoom\", request);\r\n            \r\n            if (newRoomId) {\r\n                setRoomId(newRoomId);\r\n                setIsInRoom(true);\r\n                setShowRooms(false);\r\n                setMessages([]); \r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error creating room:\", e);\r\n        }\r\n    };\r\n    \r\n    const joinRoom = async () => {\r\n        if (!username || !roomId) return alert(\"Введите имя пользователя и ID комнаты!\");\r\n        await executeJoin(roomId);\r\n    };\r\n    \r\n    const executeJoin = async (id: string) => {\r\n        setRoomId(id);\r\n        try {\r\n            const request: JoinRoomRequest = { username, roomId: id };\r\n            const success = await connection?.invoke<boolean>(\"JoinRoom\", request);\r\n            if (success) {\r\n                setIsInRoom(true);\r\n                setShowRooms(false);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error joining room:\", e);\r\n            alert(`Не удалось войти в комнату ${id}. Возможно, ее не существует.`);\r\n        }\r\n    };\r\n\r\n\r\n    const sendMessage = async () => {\r\n        if (!inputText) return;\r\n        try {\r\n            const message: ChatMessageDto = {\r\n                user: username,\r\n                text: inputText,\r\n                type: 'text',\r\n                timestamp: '' \r\n            };\r\n            await connection?.invoke(\"SendMessageToRoom\", message);\r\n            setInputText('');\r\n        } catch (e) {\r\n            console.error(\"Error sending message:\", e);\r\n        }\r\n    };\r\n\r\n    const leaveRoom = async () => {\r\n        try {\r\n            await connection?.invoke(\"LeaveRoom\");\r\n            setIsInRoom(false);\r\n            setMessages([]);\r\n            setRoomId('');\r\n            setRoomNameForCreation('');\r\n        } catch (e) {\r\n            console.error(\"Error leaving room:\", e);\r\n        }\r\n    };\r\n\r\n    const deleteRoom = async () => {\r\n        if(!window.confirm(\"Вы уверены? Только создатель может удалить комнату.\")) return;\r\n        try {\r\n            await connection?.invoke(\"DeleteRoom\", roomId, username);\r\n            setIsInRoom(false);\r\n            setMessages([]);\r\n            setRoomId('');\r\n            setRoomNameForCreation('');\r\n        } catch (e) {\r\n            console.error(\"Error deleting room:\", e);\r\n            alert(\"Не удалось удалить комнату. Вы ее создатель?\");\r\n        }\r\n    };\r\n\r\n    const loadUserRooms = async () => {\r\n        if (!username) return alert(\"Введите имя пользователя!\");\r\n        \r\n        if(showRooms) {\r\n            setShowRooms(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const roomIds = await connection?.invoke<string[]>(\"GetUserRoomIds\", username);\r\n\r\n            if (roomIds && roomIds.length > 0) {\r\n                const roomsData = await Promise.all(\r\n                    roomIds.map(id => connection?.invoke<RoomInfoDto | null>(\"GetRoomInfo\", id))\r\n                );\r\n\r\n                setMyRooms(roomsData.filter((r): r is RoomInfoDto => r !== null));\r\n                setShowRooms(true);\r\n            } else {\r\n                alert(\"Активные комнаты для этого пользователя не найдены.\");\r\n                setMyRooms([]);\r\n                setShowRooms(false);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error loading rooms:\", e);\r\n            alert(\"Не удалось загрузить комнаты. Проверьте консоль.\");\r\n        }\r\n    };\r\n\r\n    return {\r\n        // State\r\n        username, setUsername,\r\n        roomId, setRoomId,\r\n        isInRoom, setIsInRoom,\r\n        messages,\r\n        inputText, setInputText,\r\n        messagesEndRef,\r\n        connection,\r\n\r\n        // Lobby State\r\n        roomNameForCreation, setRoomNameForCreation,\r\n        myRooms,\r\n        showRooms,\r\n\r\n        // Methods\r\n        createRoom,\r\n        joinRoom,\r\n        executeJoin,\r\n        sendMessage,\r\n        leaveRoom,\r\n        deleteRoom,\r\n        loadUserRooms,\r\n    };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}