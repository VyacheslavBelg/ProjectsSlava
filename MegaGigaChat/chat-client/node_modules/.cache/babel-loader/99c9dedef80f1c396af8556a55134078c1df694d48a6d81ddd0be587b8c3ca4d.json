{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\slava\\\\Desktop\\\\\\u0423\\u043D\\u0438\\u0432\\u0435\\u0440\\\\3 \\u043A\\u0443\\u0440\\u0441\\\\RIP\\\\MegaGigaChat\\\\ChatApp2.0\\\\chat-client\\\\src\\\\components\\\\ChatRoom.tsx\";\n// src/components/ChatRoom.tsx\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatRoom = ({\n  chat\n}) => {\n  const {\n    roomId,\n    username,\n    messages,\n    leaveRoom,\n    deleteRoom,\n    inputText,\n    setInputText,\n    sendMessage,\n    messagesEndRef,\n    connection\n  } = chat;\n  const isConnected = connection && connection.state === 'Connected';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card mx-auto\",\n    style: {\n      maxWidth: '800px',\n      height: '80vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header d-flex justify-content-between align-items-center bg-primary text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"mb-0\",\n        children: [\"\\u041A\\u043E\\u043C\\u043D\\u0430\\u0442\\u0430: \", roomId, \" (\\u0412\\u044B: \", username, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-danger me-2\",\n          onClick: deleteRoom,\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u041A\\u043E\\u043C\\u043D\\u0430\\u0442\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-warning\",\n          onClick: leaveRoom,\n          children: \"\\u041F\\u043E\\u043A\\u0438\\u043D\\u0443\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body overflow-auto d-flex flex-column\",\n      style: {\n        flex: 1,\n        backgroundColor: '#f8f9fa'\n      },\n      children: [messages.map((message, idx) => {\n        const isMyMessage = message.user === username;\n        const isSystemMessage = message.type !== 'text';\n\n        // Системные и уведомительные сообщения\n        if (isSystemMessage) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-muted small my-2\",\n            children: /*#__PURE__*/_jsxDEV(\"em\", {\n              children: [\"[\", message.timestamp, \"] \", message.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 33\n            }, this)\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 29\n          }, this);\n        }\n\n        // Обычные сообщения\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `d-flex mb-3 ${isMyMessage ? 'justify-content-end' : 'justify-content-start'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `card px-3 py-2 ${isMyMessage ? 'bg-primary text-white' : 'bg-white border'}`,\n            style: {\n              maxWidth: '70%',\n              borderRadius: '15px',\n              border: isMyMessage ? 'none' : '1px solid #ddd'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"small fw-bold mb-1\",\n              style: {\n                opacity: 0.8\n              },\n              children: message.user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"small text-end mt-1\",\n              style: {\n                opacity: 0.7,\n                fontSize: '0.7em'\n              },\n              children: message.timestamp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 29\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 25\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435...\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          onKeyDown: e => e.key === 'Enter' && sendMessage()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: sendMessage,\n          disabled: !isConnected,\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), !isConnected && /*#__PURE__*/_jsxDEV(\"small\", {\n        className: \"text-danger mt-1\",\n        children: \"\\u0421\\u043E\\u0435\\u0434\\u0438\\u043D\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0442\\u0435\\u0440\\u044F\\u043D\\u043E, \\u043E\\u0436\\u0438\\u0434\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0435\\u0440\\u0435\\u043F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u0438\\u044F...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, this);\n};\n_c = ChatRoom;\nexport default ChatRoom;\nvar _c;\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","ChatRoom","chat","roomId","username","messages","leaveRoom","deleteRoom","inputText","setInputText","sendMessage","messagesEndRef","connection","isConnected","state","className","style","maxWidth","height","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","flex","backgroundColor","map","message","idx","isMyMessage","user","isSystemMessage","type","timestamp","text","borderRadius","border","opacity","fontSize","ref","placeholder","value","onChange","e","target","onKeyDown","key","disabled","_c","$RefreshReg$"],"sources":["C:/Users/slava/Desktop/Универ/3 курс/RIP/MegaGigaChat/ChatApp2.0/chat-client/src/components/ChatRoom.tsx"],"sourcesContent":["// src/components/ChatRoom.tsx\r\nimport React from 'react';\r\nimport { useChat } from '../hooks/useChat';\r\n\r\ninterface ChatRoomProps {\r\n    chat: ReturnType<typeof useChat>;\r\n}\r\n\r\nconst ChatRoom: React.FC<ChatRoomProps> = ({ chat }) => {\r\n    const {\r\n        roomId, username, messages,\r\n        leaveRoom, deleteRoom,\r\n        inputText, setInputText, sendMessage,\r\n        messagesEndRef, connection\r\n    } = chat;\r\n\r\n    const isConnected = connection && connection.state === 'Connected';\r\n\r\n    return (\r\n        <div className=\"card mx-auto\" style={{maxWidth: '800px', height: '80vh'}}>\r\n            {/* Заголовок комнаты */}\r\n            <div className=\"card-header d-flex justify-content-between align-items-center bg-primary text-white\">\r\n                <h5 className=\"mb-0\">Комната: {roomId} (Вы: {username})</h5>\r\n                <div>\r\n                    <button className=\"btn btn-sm btn-danger me-2\" onClick={deleteRoom}>Удалить Комнату</button>\r\n                    <button className=\"btn btn-sm btn-warning\" onClick={leaveRoom}>Покинуть</button>\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Область сообщений */}\r\n            <div className=\"card-body overflow-auto d-flex flex-column\" style={{flex: 1, backgroundColor: '#f8f9fa'}}>\r\n                {messages.map((message, idx) => {\r\n                    const isMyMessage = message.user === username;\r\n                    const isSystemMessage = message.type !== 'text';\r\n\r\n                    // Системные и уведомительные сообщения\r\n                    if (isSystemMessage) {\r\n                        return (\r\n                            <div key={idx} className=\"text-center text-muted small my-2\">\r\n                                <em>[{message.timestamp}] {message.text}</em>\r\n                            </div>\r\n                        );\r\n                    }\r\n\r\n                    // Обычные сообщения\r\n                    return (\r\n                        <div key={idx} className={`d-flex mb-3 ${isMyMessage ? 'justify-content-end' : 'justify-content-start'}`}>\r\n                            <div \r\n                                className={`card px-3 py-2 ${isMyMessage ? 'bg-primary text-white' : 'bg-white border'}`}\r\n                                style={{maxWidth: '70%', borderRadius: '15px', border: isMyMessage ? 'none' : '1px solid #ddd'}}\r\n                            >\r\n                                <div className=\"small fw-bold mb-1\" style={{opacity: 0.8}}>{message.user}</div>\r\n                                <div>{message.text}</div>\r\n                                <div className=\"small text-end mt-1\" style={{opacity: 0.7, fontSize: '0.7em'}}>{message.timestamp}</div>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Поле ввода сообщения */}\r\n            <div className=\"card-footer\">\r\n                <div className=\"input-group\">\r\n                    <input \r\n                        type=\"text\" \r\n                        className=\"form-control\"\r\n                        placeholder=\"Введите сообщение...\"\r\n                        value={inputText}\r\n                        onChange={e => setInputText(e.target.value)}\r\n                        onKeyDown={e => e.key === 'Enter' && sendMessage()}\r\n                    />\r\n                    <button \r\n                        className=\"btn btn-primary\" \r\n                        onClick={sendMessage} \r\n                        disabled={!isConnected}\r\n                    >\r\n                        Отправить\r\n                    </button>\r\n                </div>\r\n                {!isConnected && (\r\n                    <small className=\"text-danger mt-1\">Соединение потеряно, ожидание переподключения...</small>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatRoom;"],"mappings":";AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAO1B,MAAMC,QAAiC,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EACpD,MAAM;IACFC,MAAM;IAAEC,QAAQ;IAAEC,QAAQ;IAC1BC,SAAS;IAAEC,UAAU;IACrBC,SAAS;IAAEC,YAAY;IAAEC,WAAW;IACpCC,cAAc;IAAEC;EACpB,CAAC,GAAGV,IAAI;EAER,MAAMW,WAAW,GAAGD,UAAU,IAAIA,UAAU,CAACE,KAAK,KAAK,WAAW;EAElE,oBACId,OAAA;IAAKe,SAAS,EAAC,cAAc;IAACC,KAAK,EAAE;MAACC,QAAQ,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAM,CAAE;IAAAC,QAAA,gBAErEnB,OAAA;MAAKe,SAAS,EAAC,qFAAqF;MAAAI,QAAA,gBAChGnB,OAAA;QAAIe,SAAS,EAAC,MAAM;QAAAI,QAAA,GAAC,8CAAS,EAAChB,MAAM,EAAC,kBAAM,EAACC,QAAQ,EAAC,GAAC;MAAA;QAAAgB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC5DvB,OAAA;QAAAmB,QAAA,gBACInB,OAAA;UAAQe,SAAS,EAAC,4BAA4B;UAACS,OAAO,EAAEjB,UAAW;UAAAY,QAAA,EAAC;QAAe;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC5FvB,OAAA;UAAQe,SAAS,EAAC,wBAAwB;UAACS,OAAO,EAAElB,SAAU;UAAAa,QAAA,EAAC;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/E,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGNvB,OAAA;MAAKe,SAAS,EAAC,4CAA4C;MAACC,KAAK,EAAE;QAACS,IAAI,EAAE,CAAC;QAAEC,eAAe,EAAE;MAAS,CAAE;MAAAP,QAAA,GACpGd,QAAQ,CAACsB,GAAG,CAAC,CAACC,OAAO,EAAEC,GAAG,KAAK;QAC5B,MAAMC,WAAW,GAAGF,OAAO,CAACG,IAAI,KAAK3B,QAAQ;QAC7C,MAAM4B,eAAe,GAAGJ,OAAO,CAACK,IAAI,KAAK,MAAM;;QAE/C;QACA,IAAID,eAAe,EAAE;UACjB,oBACIhC,OAAA;YAAee,SAAS,EAAC,mCAAmC;YAAAI,QAAA,eACxDnB,OAAA;cAAAmB,QAAA,GAAI,GAAC,EAACS,OAAO,CAACM,SAAS,EAAC,IAAE,EAACN,OAAO,CAACO,IAAI;YAAA;cAAAf,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK;UAAC,GADvCM,GAAG;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAER,CAAC;QAEd;;QAEA;QACA,oBACIvB,OAAA;UAAee,SAAS,EAAE,eAAee,WAAW,GAAG,qBAAqB,GAAG,uBAAuB,EAAG;UAAAX,QAAA,eACrGnB,OAAA;YACIe,SAAS,EAAE,kBAAkBe,WAAW,GAAG,uBAAuB,GAAG,iBAAiB,EAAG;YACzFd,KAAK,EAAE;cAACC,QAAQ,EAAE,KAAK;cAAEmB,YAAY,EAAE,MAAM;cAAEC,MAAM,EAAEP,WAAW,GAAG,MAAM,GAAG;YAAgB,CAAE;YAAAX,QAAA,gBAEhGnB,OAAA;cAAKe,SAAS,EAAC,oBAAoB;cAACC,KAAK,EAAE;gBAACsB,OAAO,EAAE;cAAG,CAAE;cAAAnB,QAAA,EAAES,OAAO,CAACG;YAAI;cAAAX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC/EvB,OAAA;cAAAmB,QAAA,EAAMS,OAAO,CAACO;YAAI;cAAAf,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACzBvB,OAAA;cAAKe,SAAS,EAAC,qBAAqB;cAACC,KAAK,EAAE;gBAACsB,OAAO,EAAE,GAAG;gBAAEC,QAAQ,EAAE;cAAO,CAAE;cAAApB,QAAA,EAAES,OAAO,CAACM;YAAS;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvG;QAAC,GARAM,GAAG;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OASR,CAAC;MAEd,CAAC,CAAC,eACFvB,OAAA;QAAKwC,GAAG,EAAE7B;MAAe;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3B,CAAC,eAGNvB,OAAA;MAAKe,SAAS,EAAC,aAAa;MAAAI,QAAA,gBACxBnB,OAAA;QAAKe,SAAS,EAAC,aAAa;QAAAI,QAAA,gBACxBnB,OAAA;UACIiC,IAAI,EAAC,MAAM;UACXlB,SAAS,EAAC,cAAc;UACxB0B,WAAW,EAAC,sGAAsB;UAClCC,KAAK,EAAElC,SAAU;UACjBmC,QAAQ,EAAEC,CAAC,IAAInC,YAAY,CAACmC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC5CI,SAAS,EAAEF,CAAC,IAAIA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAIrC,WAAW,CAAC;QAAE;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtD,CAAC,eACFvB,OAAA;UACIe,SAAS,EAAC,iBAAiB;UAC3BS,OAAO,EAAEd,WAAY;UACrBsC,QAAQ,EAAE,CAACnC,WAAY;UAAAM,QAAA,EAC1B;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,EACL,CAACV,WAAW,iBACTb,OAAA;QAAOe,SAAS,EAAC,kBAAkB;QAAAI,QAAA,EAAC;MAAgD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAC9F;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAAC0B,EAAA,GA9EIhD,QAAiC;AAgFvC,eAAeA,QAAQ;AAAC,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}