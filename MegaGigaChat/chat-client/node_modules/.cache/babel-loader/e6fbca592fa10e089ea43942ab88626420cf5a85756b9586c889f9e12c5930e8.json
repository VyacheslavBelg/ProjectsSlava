{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useChat.ts\nimport { useState, useEffect, useRef } from 'react';\n// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ HubConnection, HubConnectionBuilder –∏ LogLevel\nimport { HubConnectionBuilder, LogLevel } from '@microsoft/signalr';\nconst CHAT_HUB_URL = \"http://localhost:5157/chatHub\";\nexport const useChat = () => {\n  _s();\n  // State\n  const [connection, setConnection] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [username, setUsername] = useState('');\n  const [roomId, setRoomId] = useState('');\n  const [isInRoom, setIsInRoom] = useState(false);\n  const [inputText, setInputText] = useState('');\n\n  // Lobby State\n  const [roomNameForCreation, setRoomNameForCreation] = useState('');\n  const [myRooms, setMyRooms] = useState([]);\n  const [showRooms, setShowRooms] = useState(false);\n\n  // Ref for chat auto-scroll\n  const messagesEndRef = useRef(null);\n\n  // 1. Connection Initialization\n  useEffect(() => {\n    const newConnection = new HubConnectionBuilder().withUrl(CHAT_HUB_URL, {\n      // üëá AccessTokenFactory ‚Äî —ç—Ç–æ –æ–ø—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω–µ –Ω—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å\n      accessTokenFactory: () => localStorage.getItem('accessToken') || ''\n    }).withAutomaticReconnect().configureLogging(LogLevel.Information).build();\n    setConnection(newConnection);\n  }, []);\n\n  // 2. Event Handlers and Start Connection\n  useEffect(() => {\n    if (connection) {\n      connection.start().then(() => {\n        console.log('Connected to SignalR Hub');\n        connection.on(\"ReceiveMessage\", message => {\n          setMessages(prev => [...prev, message]);\n        });\n        connection.on(\"ReceiveRoomHistory\", history => {\n          setMessages(history);\n        });\n        connection.on(\"ReceiveError\", error => {\n          alert(`–û—à–∏–±–∫–∞: ${error.text}`);\n          setIsInRoom(false);\n        });\n      }).catch(e => console.log('Connection failed: ', e));\n    }\n  }, [connection]);\n\n  // Auto-scroll\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // --- Action Functions (Client -> Server) ---\n\n  const createRoom = async () => {\n    if (!username) return alert(\"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!\");\n    try {\n      const request = {\n        username,\n        roomName: roomNameForCreation\n      };\n      const newRoomId = await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"CreateRoom\", request));\n      if (newRoomId) {\n        setRoomId(newRoomId);\n        setIsInRoom(true);\n        setShowRooms(false);\n        setMessages([]);\n      }\n    } catch (e) {\n      console.error(\"Error creating room:\", e);\n    }\n  };\n  const joinRoom = async () => {\n    if (!username || !roomId) return alert(\"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ ID –∫–æ–º–Ω–∞—Ç—ã!\");\n    await executeJoin(roomId);\n  };\n  const executeJoin = async id => {\n    setRoomId(id);\n    try {\n      const request = {\n        username,\n        roomId: id\n      };\n      const success = await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"JoinRoom\", request));\n      if (success) {\n        setIsInRoom(true);\n        setShowRooms(false);\n      }\n    } catch (e) {\n      console.error(\"Error joining room:\", e);\n      alert(`–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É ${id}. –í–æ–∑–º–æ–∂–Ω–æ, –µ–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.`);\n    }\n  };\n  const sendMessage = async () => {\n    if (!inputText) return;\n    try {\n      const message = {\n        user: username,\n        text: inputText,\n        type: 'text',\n        timestamp: ''\n      };\n      await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"SendMessageToRoom\", message));\n      setInputText('');\n    } catch (e) {\n      console.error(\"Error sending message:\", e);\n    }\n  };\n  const leaveRoom = async () => {\n    try {\n      await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"LeaveRoom\"));\n      setIsInRoom(false);\n      setMessages([]);\n      setRoomId('');\n      setRoomNameForCreation('');\n    } catch (e) {\n      console.error(\"Error leaving room:\", e);\n    }\n  };\n  const deleteRoom = async () => {\n    if (!window.confirm(\"–í—ã —É–≤–µ—Ä–µ–Ω—ã? –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É.\")) return;\n    try {\n      await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"DeleteRoom\", roomId, username));\n      setIsInRoom(false);\n      setMessages([]);\n      setRoomId('');\n      setRoomNameForCreation('');\n    } catch (e) {\n      console.error(\"Error deleting room:\", e);\n      alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É. –í—ã –µ–µ —Å–æ–∑–¥–∞—Ç–µ–ª—å?\");\n    }\n  };\n  const loadUserRooms = async () => {\n    if (!username) return alert(\"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!\");\n    if (showRooms) {\n      setShowRooms(false);\n      return;\n    }\n    try {\n      const roomIds = await (connection === null || connection === void 0 ? void 0 : connection.invoke(\"GetUserRoomIds\", username));\n      if (roomIds && roomIds.length > 0) {\n        const roomsData = await Promise.all(roomIds.map(id => connection === null || connection === void 0 ? void 0 : connection.invoke(\"GetRoomInfo\", id)));\n        setMyRooms(roomsData.filter(r => r !== null));\n        setShowRooms(true);\n      } else {\n        alert(\"–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.\");\n        setMyRooms([]);\n        setShowRooms(false);\n      }\n    } catch (e) {\n      console.error(\"Error loading rooms:\", e);\n      alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–º–Ω–∞—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å.\");\n    }\n  };\n  return {\n    // State\n    username,\n    setUsername,\n    roomId,\n    setRoomId,\n    isInRoom,\n    setIsInRoom,\n    messages,\n    inputText,\n    setInputText,\n    messagesEndRef,\n    connection,\n    // Lobby State\n    roomNameForCreation,\n    setRoomNameForCreation,\n    myRooms,\n    showRooms,\n    // Methods\n    createRoom,\n    joinRoom,\n    executeJoin,\n    sendMessage,\n    leaveRoom,\n    deleteRoom,\n    loadUserRooms\n  };\n};\n_s(useChat, \"9m+tQR+2M5eZ29JTKJCldeGsnK4=\");","map":{"version":3,"names":["useState","useEffect","useRef","HubConnectionBuilder","LogLevel","CHAT_HUB_URL","useChat","_s","connection","setConnection","messages","setMessages","username","setUsername","roomId","setRoomId","isInRoom","setIsInRoom","inputText","setInputText","roomNameForCreation","setRoomNameForCreation","myRooms","setMyRooms","showRooms","setShowRooms","messagesEndRef","newConnection","withUrl","accessTokenFactory","localStorage","getItem","withAutomaticReconnect","configureLogging","Information","build","start","then","console","log","on","message","prev","history","error","alert","text","catch","e","_messagesEndRef$curre","current","scrollIntoView","behavior","createRoom","request","roomName","newRoomId","invoke","joinRoom","executeJoin","id","success","sendMessage","user","type","timestamp","leaveRoom","deleteRoom","window","confirm","loadUserRooms","roomIds","length","roomsData","Promise","all","map","filter","r"],"sources":["C:/Users/slava/Desktop/–£–Ω–∏–≤–µ—Ä/3 –∫—É—Ä—Å/RIP/MegaGigaChat/ChatApp2.0/chat-client/src/hooks/useChat.ts"],"sourcesContent":["// src/hooks/useChat.ts\r\nimport { useState, useEffect, useRef } from 'react';\r\n// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ HubConnection, HubConnectionBuilder –∏ LogLevel\r\nimport { HubConnection, HubConnectionBuilder, LogLevel } from '@microsoft/signalr';\r\nimport { ChatMessageDto, CreateRoomRequest, JoinRoomRequest, RoomInfoDto } from '../types';\r\n\r\nconst CHAT_HUB_URL = \"http://localhost:5157/chatHub\";\r\n\r\nexport const useChat = () => {\r\n    // State\r\n    const [connection, setConnection] = useState<HubConnection | null>(null);\r\n    const [messages, setMessages] = useState<ChatMessageDto[]>([]);\r\n    const [username, setUsername] = useState('');\r\n    const [roomId, setRoomId] = useState('');\r\n    const [isInRoom, setIsInRoom] = useState(false);\r\n    const [inputText, setInputText] = useState('');\r\n    \r\n    // Lobby State\r\n    const [roomNameForCreation, setRoomNameForCreation] = useState('');\r\n    const [myRooms, setMyRooms] = useState<RoomInfoDto[]>([]); \r\n    const [showRooms, setShowRooms] = useState(false);\r\n\r\n    // Ref for chat auto-scroll\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    // 1. Connection Initialization\r\n    useEffect(() => {\r\n        const newConnection = new HubConnectionBuilder()\r\n            .withUrl(CHAT_HUB_URL, {\r\n                // üëá AccessTokenFactory ‚Äî —ç—Ç–æ –æ–ø—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω–µ –Ω—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å\r\n                accessTokenFactory: () => localStorage.getItem('accessToken') || ''\r\n            })\r\n            .withAutomaticReconnect()\r\n            .configureLogging(LogLevel.Information)\r\n            .build();\r\n\r\n        setConnection(newConnection);\r\n    }, []);\r\n\r\n    // 2. Event Handlers and Start Connection\r\n    useEffect(() => {\r\n        if (connection) {\r\n            connection.start()\r\n                .then(() => {\r\n                    console.log('Connected to SignalR Hub');\r\n                    \r\n                    connection.on(\"ReceiveMessage\", (message: ChatMessageDto) => {\r\n                        setMessages(prev => [...prev, message]);\r\n                    });\r\n\r\n                    connection.on(\"ReceiveRoomHistory\", (history: ChatMessageDto[]) => {\r\n                        setMessages(history);\r\n                    });\r\n\r\n                    connection.on(\"ReceiveError\", (error: ChatMessageDto) => {\r\n                        alert(`–û—à–∏–±–∫–∞: ${error.text}`);\r\n                        setIsInRoom(false); \r\n                    });\r\n                })\r\n                .catch(e => console.log('Connection failed: ', e));\r\n        }\r\n    }, [connection]);\r\n\r\n    // Auto-scroll\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [messages]);\r\n\r\n    // --- Action Functions (Client -> Server) ---\r\n\r\n    const createRoom = async () => {\r\n        if (!username) return alert(\"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!\");\r\n        try {\r\n            const request: CreateRoomRequest = { username, roomName: roomNameForCreation };\r\n            const newRoomId = await connection?.invoke<string>(\"CreateRoom\", request);\r\n            \r\n            if (newRoomId) {\r\n                setRoomId(newRoomId);\r\n                setIsInRoom(true);\r\n                setShowRooms(false);\r\n                setMessages([]); \r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error creating room:\", e);\r\n        }\r\n    };\r\n    \r\n    const joinRoom = async () => {\r\n        if (!username || !roomId) return alert(\"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ ID –∫–æ–º–Ω–∞—Ç—ã!\");\r\n        await executeJoin(roomId);\r\n    };\r\n    \r\n    const executeJoin = async (id: string) => {\r\n        setRoomId(id);\r\n        try {\r\n            const request: JoinRoomRequest = { username, roomId: id };\r\n            const success = await connection?.invoke<boolean>(\"JoinRoom\", request);\r\n            if (success) {\r\n                setIsInRoom(true);\r\n                setShowRooms(false);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error joining room:\", e);\r\n            alert(`–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É ${id}. –í–æ–∑–º–æ–∂–Ω–æ, –µ–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.`);\r\n        }\r\n    };\r\n\r\n\r\n    const sendMessage = async () => {\r\n        if (!inputText) return;\r\n        try {\r\n            const message: ChatMessageDto = {\r\n                user: username,\r\n                text: inputText,\r\n                type: 'text',\r\n                timestamp: '' \r\n            };\r\n            await connection?.invoke(\"SendMessageToRoom\", message);\r\n            setInputText('');\r\n        } catch (e) {\r\n            console.error(\"Error sending message:\", e);\r\n        }\r\n    };\r\n\r\n    const leaveRoom = async () => {\r\n        try {\r\n            await connection?.invoke(\"LeaveRoom\");\r\n            setIsInRoom(false);\r\n            setMessages([]);\r\n            setRoomId('');\r\n            setRoomNameForCreation('');\r\n        } catch (e) {\r\n            console.error(\"Error leaving room:\", e);\r\n        }\r\n    };\r\n\r\n    const deleteRoom = async () => {\r\n        if(!window.confirm(\"–í—ã —É–≤–µ—Ä–µ–Ω—ã? –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É.\")) return;\r\n        try {\r\n            await connection?.invoke(\"DeleteRoom\", roomId, username);\r\n            setIsInRoom(false);\r\n            setMessages([]);\r\n            setRoomId('');\r\n            setRoomNameForCreation('');\r\n        } catch (e) {\r\n            console.error(\"Error deleting room:\", e);\r\n            alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É. –í—ã –µ–µ —Å–æ–∑–¥–∞—Ç–µ–ª—å?\");\r\n        }\r\n    };\r\n\r\n    const loadUserRooms = async () => {\r\n        if (!username) return alert(\"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!\");\r\n        \r\n        if(showRooms) {\r\n            setShowRooms(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const roomIds = await connection?.invoke<string[]>(\"GetUserRoomIds\", username);\r\n\r\n            if (roomIds && roomIds.length > 0) {\r\n                const roomsData = await Promise.all(\r\n                    roomIds.map(id => connection?.invoke<RoomInfoDto | null>(\"GetRoomInfo\", id))\r\n                );\r\n\r\n                setMyRooms(roomsData.filter((r): r is RoomInfoDto => r !== null));\r\n                setShowRooms(true);\r\n            } else {\r\n                alert(\"–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.\");\r\n                setMyRooms([]);\r\n                setShowRooms(false);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error loading rooms:\", e);\r\n            alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–º–Ω–∞—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å.\");\r\n        }\r\n    };\r\n\r\n    return {\r\n        // State\r\n        username, setUsername,\r\n        roomId, setRoomId,\r\n        isInRoom, setIsInRoom,\r\n        messages,\r\n        inputText, setInputText,\r\n        messagesEndRef,\r\n        connection,\r\n\r\n        // Lobby State\r\n        roomNameForCreation, setRoomNameForCreation,\r\n        myRooms,\r\n        showRooms,\r\n\r\n        // Methods\r\n        createRoom,\r\n        joinRoom,\r\n        executeJoin,\r\n        sendMessage,\r\n        leaveRoom,\r\n        deleteRoom,\r\n        loadUserRooms,\r\n    };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}